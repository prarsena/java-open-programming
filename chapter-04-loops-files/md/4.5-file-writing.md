# 4.5 File Input and Output Overview

File input and output (I/O) allows data to be saved to files for persistence, meaning the data remains after the program terminates. File operations involve three steps: opening, reading/writing, and closing.

The core Java I/O objects are `PrintWriter`, `FileWriter`, `File`, and `Scanner`.

The objects used for file I/O must be imported from the `java.io` package, while Scanner is imported from `java.util`:

```java
import java.util.Scanner;   // Needed for Scanner class
import java.io.*;           // Needed for File I/O classes
```

## 4.5.1 PrintWriter: Writing Data to a File
The `PrintWriter` class is used to open a file for text output and write data using the familiar `print`, `println`, and `printf` methods.

> ‚ÄºÔ∏è ‚ö†Ô∏è üë∫ **Warning:** If the file already exists, creating a new `PrintWriter` instance by passing only the filename argument will **OVERWRITE** the existing file.

The process for writing data to a file using PrintWriter is as follows:

1. To open a file for text output you create an instance of the PrintWriter class. You pass the name of a file that you want to open as an argument to the PrintWriter object constructor. For example:
   `PrintWriter outputFile = new PrintWriter("StudentData.txt");`
	- Unless you specify a directory, the file is written in the location where the Java class is run from.
2. The PrintWriter class allows you to write data to a file using the `print`, `println`, and `printf` methods.
	- Just as with the `System.out` object, the `println` method of the `PrintWriter` class will place a newline character after the written data.
	- The `print` method writes data without writing the newline character.
	- The `printf` method is also supported, allowing you to insert formatted Strings into the file.

> üßê **Mnemonics tip**: It's called **PRINT**-writer because it has `print` and `println` methods like `System.output`. 

**Basic Example of using PrintWriter (Overwriting):**

```java
import java.io.*; // Required import
public class WriteStudentData {  
	public static void main(String[] args) throws FileNotFoundException {
	    PrintWriter outputFile = new PrintWriter("StudentData.txt"); 
	    // OVERWRITES if file exists
	
	    outputFile.println("Stephen"); // Writes "Stephen" followed by a newline
	    outputFile.println("Patrick");
	    outputFile.printf("%20s %n", "Morrissey"); //printf syntax is supporrted.
	    
	    // Crucial step: must close the PrintWriter object!
	    outputFile.close();
	}
}
```

Remember, if you run the program multiple times, you overwrite the file each time. 

Here's another example of writing data to a file using PrintWriter:

```java
import java.io.*;  
public class CreateMusicArtistsFile {  
    public static void main(String[] args) throws FileNotFoundException {  
		PrintWriter outputFile = new PrintWriter("MusicArtists.txt");
		outputFile.println("The Cure");  
		outputFile.println("The Smiths");  
		outputFile.println("Joy Division");  
		outputFile.println("Green Day");  
		outputFile.println("The The");  
		outputFile.println("The Beach Boys");  
		outputFile.println("Talking Heads");  
		outputFile.println("Neutral Milk Hotel");  
		outputFile.println("The Magnetic Fields");  
		outputFile.println("The Velvet Underground");  
		outputFile.close();   
	}  
}
```

Try to work through the following example, which uses a Scanner, a `for` loop, and non-self-contained initializer variable (because we want to access it outside the scope of the loop):

```java
import java.io.*;  
import java.util.Scanner;  
  
public class PrintWriterTesting {  
    public static void main(String[] args) throws FileNotFoundException {  
        int i;  
        Scanner kbd = new Scanner(System.in);  
        PrintWriter outputFile = new PrintWriter("PrintStudentData.txt");  
        for (i=1;i<4;i++){  
            System.out.print("Enter student " + i + "'s name: ");  
            String studentName = kbd.nextLine();  
            outputFile.println(studentName);  
        }  
        System.out.println("Wrote " + (i-1) + " student names to file.");  
        outputFile.close();  
    }  
}
```

## 4.5.2 Handling File Exceptions

When performing file operations, unexpected events called **exceptions** can occur, such as the program being unable to create or access a file. Java requires methods that perform file I/O to handle these exceptions.

The simplest way for a method (like `main`) to handle an exception is to pass the responsibility up the line by using a **`throws` clause** in the method header.

*   The `PrintWriter` class throws a `FileNotFoundException`.
*   The `FileWriter` class throws an `IOException`.

Since `FileNotFoundException` is a specific type of `IOException`, you can often declare only `throws IOException` to cover both cases.

**Example using a throws clause:**

```java
public static void main(String[] args) throws IOException { 
	// Use IOException to cover most file errors
    // File writing code here
}
```

## 4.5.3 Try / Catch Exception Handling

An alternative way to handle file exceptions (such as when your program can't access a file or it doesn't exist) is to wrap the accessor code in a try / catch block, for example:

```java
import java.io.*;  
  
public class PrintWriterDemo {  
    public static void main(String[] args) {  
        try {  
            PrintWriter outputFile = new PrintWriter("");  
            outputFile.println("Carrie");  
            outputFile.println("Donnie");  
            outputFile.println("Mike");  
            outputFile.close();  
        } catch (Exception e){  
            System.out.println("Can't write to this location \n" + e );  
        }  
    }  
}

// Output:

Can't write to this location 
java.io.FileNotFoundException:  (No such file or directory)
```

The `catch` block works similarly to an `else` clause in an `if / else` statement. The program will try to open the file (in this case `""`, an invalid filename). Since the program can't open it, the Exception is "thrown", which is to say, printed to the console. 

## 4.5.4 FileWriter: Appending Data to a File
To prevent overwriting a file and instead **append** new data to its end, you must use the `FileWriter` class in conjunction with `PrintWriter`.

The key difference is that the `FileWriter` constructor can accept a second boolean argument. Setting this argument to `true` enables appending:

**Simple Example of Appending Data:**

```java
public static void main(String[] args) throws IOException {
    // 1. Create a FileWriter instance, specifying 'true' to append
    FileWriter fwriter = new FileWriter("names.txt", true); 
    
    // 2. Pass the FileWriter object to the PrintWriter constructor
    PrintWriter outputFile = new PrintWriter(fwriter);

    outputFile.println("Charlie");
    outputFile.close();
}
// Running this multiple times adds "Charlie" each time instead of overwriting.
```


**A slightly more complex example** 

In this program, a while loop continually prompts the user to enter usernames and passwords to a file called `UserData.txt`. The program ends when the user answers "No" to the `Add another user?` prompt.

```java
import java.io.*;
import java.util.Scanner;

public class CreatePasswordFile {
    public static void main(String[] args) throws IOException {
        FileWriter fwriter = new FileWriter("UserData.txt", true); 
        PrintWriter outputFile = new PrintWriter(fwriter);
		Scanner kbd = new Scanner(System.in);
        boolean addMoreUsers = true;

        while (addMoreUsers){
            System.out.print("Enter username: ");
            String username = kbd.next();

            System.out.print("Enter password: ");
            String password = kbd.next();

            outputFile.printf("username: %10s | password: %10s %n", username, password);
            System.out.printf("Added %s. %nAdd another user? (Y/n) %n", username);
            if (kbd.next().toLowerCase().charAt(0) == 'n'){
                addMoreUsers = false;
            }
        }
        
        outputFile.close();
        kbd.close();
    }
}
```

On subsequent program executions, the file is continuously appended-to, rather than overwritten.

## 4.5.5 Specifying File Location
On Windows, file paths use the backslash (`\`) character. Because the backslash is Java's escape character (e.g., `\n`), you must use two backslashes (`\\`) in a string literal to represent a single backslash in a path.

For example:

```java
PrintWriter outFile = new PrintWriter("D:\\PriceList.txt");
```

This would save or create a file called `PriceList.txt` at the root of your Windows `D:` drive (if you have one).  

A location you may want to use is your OneDrive account. You would specify the path similar to the following:

```java
PrintWriter outFile = new PrintWriter("C:\\Users\\your_username\\OneDrive - Bentley University\\CS180\\names.txt");
```

To make file handling more portable across different operating systems, you can use system properties like `System.getProperty("user.home")` to find the user's home directory. For example:

```java
System.getProperty("user.home")

// On Mac: /Users/your_username 
// On Windows: C:\Users\your_username
```

## Check Your Understanding (4.5)
1. What is the default behavior of the `PrintWriter` class if the output file already exists, and how can this be changed to append data instead?
2. When performing file I/O, why is it necessary to declare `throws IOException` or a similar exception in the method header?
3. What happens if you do not call the `close()` method on a `PrintWriter` object after writing data?

## Practice Problems (4.5)
1. **File I/O Setup:** Write the code statements required to open a file named `log.txt` for *appending* data using `FileWriter` and `PrintWriter`, ensuring you include the correct exception handling in the `main` method header.
2. **Path Specification:** Why would the following file path declaration cause an error if not preceded by the `throws` clause? `PrintWriter logFile = new PrintWriter("C:\Users\Admin\Desktop\data.txt");`

***