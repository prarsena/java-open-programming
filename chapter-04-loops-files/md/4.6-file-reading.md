# 4.6 File Input: Reading Data from a File

To read data from a file, you combine the `File` object and the `Scanner` object.

## Reading Process

1.  Create a `File` object, passing the filename of an existing file as an argument.
2.  Create a `Scanner` object, passing the `File` object to its constructor.
3.  Use `Scanner` methods (`nextInt()`, `nextDouble()`, `nextLine()`) to read data.

**Example of Reading Data:**

```java
import java.io.*;
import java.util.Scanner;

void main() throws FileNotFoundException {
    // Create a File object. In this case, the file should already exist. 
    File myFile = new File("MusicArtists.txt"); 
    // Create a Scanner object to read the file.
    Scanner inputFile = new Scanner(myFile);    
    // Assign the first line of the file to a String variable:
    String artist = inputFile.nextLine(); 
    IO.println("First artist: " + artist);
	// Close the Scanner object!
    inputFile.close();
}
```

## Checking for the End of the File
When reading data from a file, you typically use a loop to process items sequentially until there is no more data left. The `Scanner` object provides the `hasNext()` method to check if the file contains more data to read.

**Example of Reading until End-of-File:**

```java
while (inputFile.hasNext()) { // Loop continues as long as there is more data
    String data = inputFile.nextLine();
    IO.println(data);
}
// Note: Scanner also has methods like hasNextInt() and hasNextDouble()
```

Here's an example of reading the `MusicArtists` file until the end:

```java
import java.io.*;
import java.util.Scanner;

void main() throws IOException {
    int currentLine = 1;
    Scanner inputFile = new Scanner(new File("MusicArtists.txt"));
    while(inputFile.hasNext()){  
        String str = inputFile.nextLine();  
        IO.println(String.format("%-5d %s", currentLine, str));
        currentLine++;
    }  
    inputFile.close();
}
```

While you are reading a file, you can perform processing or calculations on each line in the file. For example, you could read each line for a specific keyword, and the print the line:

```java
while (inputFile.hasNext()) {  
	String str = inputFile.nextLine();  
	if (str.contains("password")){  
		IO.println("Found password!!");  
	}  
	// Print out the line that contains the password:
	IO.println(str);  
}  
```

If you have your `UserData.txt` file handy, you can apply this technique to print out each line that contains a password:

```java
import java.io.File;
import java.io.IOException;
import java.util.Scanner;

void main() throws IOException{
    Scanner inputFile = new Scanner(new File("UserData.txt"));
    while (inputFile.hasNext()) {  
        String str = inputFile.nextLine();  
        if (str.contains("password")){  
            IO.println("Found password!!");  
        }  
        // Print out the line that contains the password:
        IO.println(str);  
    }  
    inputFile.close();
}
```


## File Object Methods
In previous sections, we created a File object to serve as input to a Scanner, then we used Scanner methods such as `.nextLine()` and `.hasNext()` to read from the file. 

The File class itself has other interesting methods that are worthy of exploring. For example, in addition to creating files, you can also use the File class to create directories. You can also use File class methods to get information about files, such as the file size, the absolute filepath, and other attributes. 

See the following code sample to learn more about File methods. Feel free to run the code on your computer and substitute your own files to keep exploring this powerful Java object:  

```java
import java.io.*;  

/* Uses File methods such as: 
	  getName()
	  getAbsolutePath()
	  exists()
	  mkdir()
      delete()
      renameTo()
      length() (size in bytes)
*/

void main() throws IOException {  
// Create or Overwrite data to a file called friends.txt in current directory.
    File oldFile = new File("friends.txt");  
// A file can also be a directory if no file type is specified.  
    File dir = new File("testDirectory");  

// Add file contents using PrintWriter.  
    PrintWriter fileContents = new PrintWriter(oldFile);  
    fileContents.println("First line of the file.");  
    fileContents.printf("Second line of the file called %s %n", oldFile.getName());  
    fileContents.printf("Absolute path of this original file: %s %n", oldFile.getAbsolutePath());  
    fileContents.print("This is the last line of the file! \n");

// File isn't written until PrintWriter is closed.  
    IO.println(String.format("Size of UNCLOSED file in bytes: %d", oldFile.length()));  

    fileContents.close();  
// File gets written with new content after PrintWriter is closed.  
    IO.println(String.format("Size of CLOSED file in bytes: %d", oldFile.length()));  

// The File object has exists() and mkdir() methods.  
// Use a Unary operator to say: if directory does not exist, then make it.       
    if (!dir.exists()){  
        dir.mkdir();  
    }    
// Specify the destination location for the file  
    File newFile = new File(dir + "/" + oldFile);  

    if (newFile.exists()){  
        newFile.delete();  
// Move file to new directory.  
        oldFile.renameTo(newFile);  
    }  

    IO.println("Old filepath: " + oldFile.getAbsolutePath());  
    IO.println("New filepath: " + newFile.getAbsolutePath());  
      
    IO.println("Can new file be read? " + newFile.canRead());  
    IO.println("Can new file be written to? " + newFile.canWrite());  
    IO.println("Can new file be executed? " + newFile.canExecute()); 
}  
```

## The try-with-resources Statement
The **`try-with-resources`** statement is highly recommended for file I/O because it automatically closes the resources (like `PrintWriter` or `Scanner` objects) once the code block finishes, regardless of whether an exception occurred. This eliminates the need for manual `close()` calls.

**Example using try-with-resources for writing:**
```java
// File is automatically closed when the try block finishes
try (PrintWriter outputFile = new PrintWriter("Output.txt")) {
    outputFile.println("Data to write.");
}
```

**Example using try-with-resources for reading:**
```java
File myFile = new File("Input.txt");

try (Scanner inputFile = new Scanner(myFile)) {
    while (inputFile.hasNext()) {
        IO.println(inputFile.nextLine());
    }
}
```

In the following example (which is amended version of the earlier `CreateMusicArtistsFile` example program), the program opens (or creates) a file called `MusicArtists.txt` and writes data to it. When all of the statements inside the `try` block execute, the file is automatically closed and saved:

```java
import java.io.*;  
void main() throws FileNotFoundException {  
    try (PrintWriter outputFile = new PrintWriter("MusicArtists.txt")){  
        outputFile.println("The Cure");  
        outputFile.println("The Smiths");  
        outputFile.println("Joy Division");  
        outputFile.println("Green Day");  
        outputFile.println("The The");  
        outputFile.println("The Beach Boys");  
        outputFile.println("Talking Heads");  
        outputFile.println("Neutral Milk Hotel");  
        outputFile.println("The Magnetic Fields");  
        outputFile.println("The Velvet Underground");  
    }
}  
```

We can then use a Scanner object to read directly from this file and print out its contents to the console:

```java
import java.io.*;  
import java.util.Scanner;  
  
void main() throws FileNotFoundException{
    int currentLine = 1;
    try (Scanner inputFile = new Scanner(new File("MusicArtists.txt"))){  
        while(inputFile.hasNext()){  
            String str = inputFile.nextLine();  
            IO.println(String.format("%-5d %s", currentLine, str));             
            currentLine++;    
        }  
    }  
}  
```

We can do more complex data processing using our Java objects. For example, we could read from the MusicArtists file and count the number of bands with the word `The` in their name. 

```java
import java.io.*;  
import java.util.Scanner;  
  
void main() throws FileNotFoundException{  

    int theAccumulator = 0;  
    int bandsWithTheInTheName = 0;  
    int bandsWithoutTheInTheName = 0;  
    int currentLine = 1;  
    try (Scanner inputFile = new Scanner(new File("MusicArtists.txt"))){  
        while(inputFile.hasNext()){  
            String str = inputFile.nextLine();  
            IO.println(String.format("%-5d %s", currentLine, str));  
            if (str.contains("The")){  
                bandsWithTheInTheName++;  

                int firstThe = str.indexOf("The");  
                int secondThe = str.lastIndexOf("The");  
                if (firstThe != secondThe){  
                    theAccumulator+=2;  
                } else {  
                    theAccumulator++;  
                }  
            } else {  
                bandsWithoutTheInTheName++;  
            }  
            currentLine++;  
        }  
    }  

    IO.println(String.format("%n%-30s %d", "Bands with \"The\" in name:", bandsWithTheInTheName));  
    IO.println(String.format("%-30s %d", "Bands without \"The\" in name:", bandsWithoutTheInTheName));  
    IO.println(String.format("%-30s %d", "Total \"The\"s:", theAccumulator));  
}  
```

#### Check Your Understanding (4.6)
1. Which method should you use on a file `Scanner` object within a `while` loop to ensure you read data until the end of the file is reached?
2. Describe the primary benefit of using the `try-with-resources` statement for file I/O operations.

#### Practice Problems (4.6)
1. **File Reading Setup:** Write the minimum required Java statements (excluding imports and exception handling) to set up reading data from a file named `Scores.txt`.
2. **Data Retrieval:** Assuming `fileScanner` references a `Scanner` object opened for reading a file, write the single statement required to read the next integer value from the file and store it in an `int` variable named `value`.