# Advanced Swing: Menus, Files, and Timers

Once you have mastered the basics of Frames, Panels, and Buttons, you can start adding more professional features to your Swing applications. In this section, we will look at adding Menu Bars, opening files, and creating simple animations.

## 1. The Menu Bar

Most desktop applications have a menu bar at the top of the window (File, Edit, View, etc.). In Swing, this is built using three components:

1.  **`JMenuBar`**: The bar itself that sits at the top of the frame.
2.  **`JMenu`**: The dropdown categories (e.g., "File").
3.  **`JMenuItem`**: The individual clickable options (e.g., "Open", "Save", "Exit").

```java
import javax.swing.*;
import java.awt.event.ActionEvent;

public class MenuDemo {
    void main() {
        JFrame frame = new JFrame("Menu Demo");
        frame.setSize(400, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // 1. Create the Menu Bar
        JMenuBar menuBar = new JMenuBar();

        // 2. Create a Menu
        JMenu fileMenu = new JMenu("File");
        JMenu helpMenu = new JMenu("Help");

        // 3. Create Menu Items
        JMenuItem openItem = new JMenuItem("Open");
        JMenuItem exitItem = new JMenuItem("Exit");
        
        // 4. Add Actions
        exitItem.addActionListener(e -> System.exit(0));
        
        openItem.addActionListener(e -> {
            JOptionPane.showMessageDialog(frame, "Open clicked!");
        });

        // 5. Assemble them
        fileMenu.add(openItem);
        fileMenu.addSeparator(); // Adds a line between items
        fileMenu.add(exitItem);

        menuBar.add(fileMenu);
        menuBar.add(helpMenu);

        // 6. Set the Menu Bar on the Frame
        frame.setJMenuBar(menuBar);

        frame.setVisible(true);
    }
}
```

## 2. Opening Files with JFileChooser

We often need to let users select a file from their computer. The `JFileChooser` component provides a standard dialog for navigating the file system.

```java
JFileChooser fileChooser = new JFileChooser();

// Optional: Set the starting directory to the user's home folder
fileChooser.setCurrentDirectory(new java.io.File(System.getProperty("user.home")));

// Show the "Open" dialog
int result = fileChooser.showOpenDialog(frame);

if (result == JFileChooser.APPROVE_OPTION) {
    // User selected a file
    java.io.File selectedFile = fileChooser.getSelectedFile();
    System.out.println("Selected file: " + selectedFile.getAbsolutePath());
} else {
    System.out.println("User cancelled the operation");
}
```

You can also use `showSaveDialog(parent)` if you want to save a file.

## 3. Simple Animation with javax.swing.Timer

Swing is single-threaded. If you write a `while(true)` loop in your main method to move an object, your GUI will freeze because the "Event Dispatch Thread" (EDT) is blocked.

To perform repetitive tasks (like animation) without freezing the UI, use `javax.swing.Timer`.

**Note**: Be careful not to import `java.util.Timer`, which is a different class.

```java
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class BouncingBall {
    int x = 0;
    int y = 100;
    int xSpeed = 5;

    void main() {
        JFrame frame = new JFrame("Animation");
        frame.setSize(400, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Custom panel for drawing
        JPanel panel = new JPanel() {
            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g); // Clear the screen
                g.setColor(Color.RED);
                g.fillOval(x, y, 30, 30); // Draw the ball
            }
        };

        frame.add(panel);
        frame.setVisible(true);

        // Create a Timer that fires every 30 milliseconds (~33 FPS)
        Timer timer = new Timer(30, e -> {
            // Update logic
            x += xSpeed;
            
            // Bounce off walls
            if (x > panel.getWidth() - 30 || x < 0) {
                xSpeed = -xSpeed;
            }

            // Trigger a repaint
            panel.repaint();
        });

        timer.start();
    }
}
```

### How it Works
1.  **`Timer(delay, listener)`**: Creates a timer that calls the listener's `actionPerformed` method every `delay` milliseconds.
2.  **`panel.repaint()`**: Tells Swing that the component needs to be redrawn. Swing will call `paintComponent` as soon as possible.
3.  **`paintComponent(Graphics g)`**: This is where we do our custom drawing. Always call `super.paintComponent(g)` first to ensure the background is cleared.

By combining `Timer`, `paintComponent`, and event listeners, you can build simple games like Pong or Snake entirely in Swing!
