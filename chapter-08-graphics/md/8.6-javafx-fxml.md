# JavaFX with FXML

In our previous JavaFX examples, we built the UI using Java code (e.g., `new Button()`, `grid.add(...)`). While this works for small apps, it mixes the **Presentation** (how it looks) with the **Logic** (how it works).

In modern development, we prefer to separate these concerns. JavaFX uses an XML-based language called **FXML** to define the user interface.

## What is FXML?

FXML is a declarative markup language. It looks a lot like HTML, but for JavaFX components.

**Java Code:**
```java
VBox root = new VBox();
Button btn = new Button("Click Me");
root.getChildren().add(btn);
```

**FXML:**
```xml
<VBox xmlns:fx="http://javafx.com/fxml">
    <Button text="Click Me"/>
</VBox>
```

## The Controller

When you define your UI in FXML, you need a Java class to handle the events (like button clicks). This is called the **Controller**.

We link the FXML file to the Controller using the `fx:controller` attribute.

### 1. The FXML File (`hello-view.fxml`)

```xml
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.Button?>

<VBox alignment="CENTER" spacing="20.0" xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.example.HelloController">
    <padding>
        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0"/>
    </padding>

    <Label fx:id="welcomeText"/>
    <Button text="Hello!" onAction="#onHelloButtonClick"/>
</VBox>
```

*   **`fx:controller`**: Points to the Java class that manages this view.
*   **`fx:id`**: Gives the element a name so we can access it in Java (like a variable name).
*   **`onAction`**: Specifies the method name to call when clicked.

### 2. The Controller Class (`HelloController.java`)

```java
package com.example;

import javafx.fxml.FXML;
import javafx.scene.control.Label;

public class HelloController {
    @FXML
    private Label welcomeText;

    @FXML
    protected void onHelloButtonClick() {
        welcomeText.setText("Welcome to JavaFX Application!");
    }
}
```

*   **`@FXML`**: This annotation tells JavaFX to "inject" the component defined in the FXML file into this variable. The variable name must match the `fx:id`.

### 3. The Main Application (`HelloApplication.java`)

Finally, we need to load the FXML file in our main application.

```java
package com.example;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Scene;
import javafx.stage.Stage;
import java.io.IOException;

public class HelloApplication extends Application {
    @Override
    public void start(Stage stage) throws IOException {
        FXMLLoader fxmlLoader = new FXMLLoader(HelloApplication.class.getResource("hello-view.fxml"));
        Scene scene = new Scene(fxmlLoader.load(), 320, 240);
        stage.setTitle("Hello!");
        stage.setScene(scene);
        stage.show();
    }

    public static void main(String[] args) {
        launch();
    }
}
```

## Scene Builder

Writing XML by hand can be tedious. Fortunately, Gluon provides a free drag-and-drop tool called **Scene Builder**.

1.  Download and install Scene Builder.
2.  Open your `.fxml` file in Scene Builder.
3.  Drag components from the library onto the canvas.
4.  Set properties (text, color, size) in the Inspector panel.
5.  Assign `fx:id` and `onAction` methods in the Code panel.
6.  Save the file.

Scene Builder generates the FXML code for you, allowing you to design complex interfaces visually.

## Why Use FXML?

1.  **Separation of Concerns**: Designers can work on the FXML/CSS while developers work on the Java logic.
2.  **Maintainability**: It's easier to see the structure of the UI in a hierarchical XML file than in nested Java method calls.
3.  **Tooling**: You can use visual tools like Scene Builder.

Most professional JavaFX applications use FXML for their layouts.
